# はじめに

この記事は2022年xx月時点の記事となります。

参照時期によっては記載しているコマンド、コードが動作しない可能性がありますので、その点ご留意ください。

記事では下記のバージョンのライブラリを使用しています。

`@azure/msal-browser`: 2.28.0

# msal.jsがWAM(Web Account Manager)対応された

もともとWindwosのNativeアプリケーションのSSOなんかで利用されていたWeb Account Manager(WAM)がmsal.jsから利用できるようになりました。

UWPなどのアプリケーションではMSのアクセストークンを取得する処理のADALの後継として活躍していたようです。

ネイティブから使用する場合は鍵管理の方法などから見ても、利用できるのであれば利用するにこしたことはない。といった認証方式のようです。

今回のmsal.jsの対応でなにができるようになったかというと、アクセストークンなどの取得をWindowsで管理しているWAM経由で取得できるようになります。

ログインなどの作業が不要となるということですね。

# 制限

ChromeやEdheの拡張機能のインストールが必要なようです。拡張機能からWAMにアクセスするためだと思われます。

素直に利用することは可能といえば可能なのですが

Azure AD利用でかつ条件付きアクセスなどで拡張機能のインストールをしないとリソースアクセスできないなどの制限を課していないと

ユーザーに説明するなどの手順がただ増えるだけになりそうではあるので、楽に使えるポイントはだいぶ絞られるかもしれません。

あとは、そのポリシーに従っていないマシンはアクセスできないといった制限も増えるだけ。ともとれます。WinのみでMacは？なども…

割りと尖ったユースケースのみになりそうなのですが

逆に考えると条件付きアクセスポリシーに則ったマシンしかアクセスできないWebアプリケーションが容易に作成できる可能性がある。とも言えるかもしれません。

# 参考

https://docs.microsoft.com/ja-jp/windows/uwp/security/web-account-manager

https://tsmatz.wordpress.com/2015/06/16/windows-10-sso-web-account-manager-native-application/